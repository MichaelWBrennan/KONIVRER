modules = ["nodejs-20", "bash", "web"]
run = "npm run dev"

[nix]
channel = "stable-25_05"
packages = ["fdupes", "gh", "sptk"]

[deployment]
run = ["sh", "-c", "npm run dev"]

[workflows]
runButton = "Run Development Server"

[[workflows.workflow]]
name = "Sync with Remote"
author = 259688
mode = "sequential"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "git fetch --all --prune"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "git remote update"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "git status"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "git log --oneline origin/main -10"

[[workflows.workflow]]
name = "Remote-First Automation"
author = 259688
mode = "sequential"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "npx ts-node scripts/remote-first-automation.ts"

[[workflows.workflow]]
name = "Fix All Code & Merge"
author = 259688
mode = "sequential"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "npx ts-node scripts/fix-all-branches.ts"

[[ports]]
localPort = 3000
externalPort = 3002

[[ports]]
localPort = 12000
externalPort = 80

[[ports]]
localPort = 12001
externalPort = 3000

[[ports]]
localPort = 12002
externalPort = 3001
